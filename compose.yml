services:
  frontend:
    container_name: frontend
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "8080:8080"
    env_file:
      - .env  # Secrets like API URLs, SMTP, emails fetched from AWS Secrets Manager

    environment:
      - ENVIRONMENT=review
      - BACKEND_BASE_DOMAIN=https://dev.trade-tariff.service.gov.uk/
      - GOVUK_APP_DOMAIN="localhost"
      - GOVUK_WEBSITE_ROOT=http://localhost/
      - RAILS_ENV=production
      - MYOTT_ENABLED=true
      - AWS_REGION=eu-west-2
      - USE_SMTP=true
    extra_hosts:
      - "telemetry.preevy.dev:127.0.0.1" # Disables telemetry
volumes:
  hmrc-redis:
    driver: local
