<%= page_header 'Look up commodity codes, import duties, taxes and controls' %>

<%= form_tag perform_search_path, method: :get, class: "tariff-search feature-panel last-feature-panel feature-panel--shaded", id: "new_search" do |f| %>
  <div class="js-search-header">
    <h2 class="govuk-heading-m">
      Search for a commodity
    </h2>

    <p>
      The UK Integrated Online Tariff helps you to:
    </p>

    <ul class="govuk-list govuk-list--bullet">
      <li>find commodity codes for imports into or exports out of the UK</li>
      <li>find the taxes and duties that apply to those imports</li>
      <li>find out which certificates and licences apply to the import of your goods</li>
    </ul>

    <p>
      The first step is to find the commodity that you are importing or exporting.
    </p>

    <label class="govuk-label govuk-label--s" for="search_term">
      Enter the name of the goods or a commodity code
    </label>

    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        <div class="searchfield govuk-form-group">
          <fieldset class="govuk-fieldset govuk-search-input" aria-describedby="q-hint">
            <%= label_tag :q, search_label_text, class: 'govuk-label' %>

            <div class="govuk-hint" id="q-hint">
              Commodity codes are 10-digit numbers that classify goods so you can fill in declarations and other paperwork.
              You must use the right commodity code.
            </div>

            <%= hidden_field_tag :q, @search.q, { class: "js-commodity-picker-target" } %>

            <div class="js-commodity-picker-select js-show" data-nosubmit></div>
            <noscript>
              <%= text_field_tag(:q, @search.q, {class: "govuk-input", name: :q}) %>
            </noscript>
          </fieldset>
        </div>
      </div>
    </div>

    <details class="govuk-details govuk-!-margin-top-2" data-module="govuk-details">
      <summary class="govuk-details__summary">
        <span class="govuk-details__summary-text">
          Enter date of import
        </span>
      </summary>

      <div class="govuk-details__text">
        <div class="govuk-form-group">
          <fieldset class="govuk-fieldset" role="group" aria-describedby="find-commodity-hint">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--s b">
              <h1 class="govuk-fieldset__heading">When are you planning to trade the goods?</h1>
            </legend>

            <div class="govuk-hint" id="find-commodity-hint">
              As commodities, duties and quotas change over time, it may be important to enter the date you think
              your goods will be traded. Use the format day, month, year, for example 27&nbsp;3&nbsp;2021.
              If you don't enter a date, today's date will be used.
            </div>

            <div class="govuk-date-input">
              <div class="govuk-date-input__item">
                <div class="govuk-form-group">
                  <label class="govuk-label govuk-date-input__label" for="tariff_date_day">Day</label>
                  <%= text_field_tag(:day,
                         @search.date.day,
                         {
                           id: 'tariff_date_day',
                           name: 'day',
                           class: "govuk-input govuk-date-input__input govuk-input--width-2",
                           maxlength: 2,
                           placeholder: "DD",
                           pattern: "[0-9]*",
                           inputmode: :numeric
                         }
                        ) %>
                </div>
              </div>
              <div class="govuk-date-input__item">
                <div class="govuk-form-group">
                  <label class="govuk-label govuk-date-input__label" for="tariff_date_month">Month</label>
                  <%= text_field_tag(:month,
                         @search.date.month,
                         {
                           id: 'tariff_date_month',
                           name: 'month',
                           class: "govuk-input govuk-date-input__input govuk-input--width-2",
                           maxlength: 2,
                           placeholder: "MM",
                           pattern: "[0-9]*",
                           inputmode: :numeric
                         }
                        ) %>
                </div>
              </div>
              <div class="govuk-date-input__item">
                <div class="govuk-form-group">
                  <label class="govuk-label govuk-date-input__label" for="tariff_date_year">Year</label>
                  <%= text_field_tag(:year,
                         @search.date.year,
                         {
                           id: 'tariff_date_year',
                           name: 'year',
                           class: "govuk-input govuk-date-input__input govuk-input--width-4",
                           maxlength: 4,
                           placeholder: "YYYY",
                           pattern: "[0-9]*",
                           inputmode: :numeric
                         }
                        ) %>
                </div>
              </div>
            </div>
          </fieldset>
        </div>
      </div>
    </details>

    <%= submit_tag 'Search for a commodity', class: 'govuk-button' %>
  </div>

  <p>
    Alternatively, you can
    <%= link_to 'browse the goods classification', browse_sections_path %>
    or
    <%= link_to 'look for your product in the A-Z', a_z_index_path('a') %>.
  </p>
<% end %>

<%= render 'sections/stw_information' %>

