<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <p>When commodity codes expire theyâ€™re no longer usable. The codes might have been removed or absorbed into different commodity codes.</p>
    <p>On this page you can review the changes for commodities. If you want you can also remove these codes from your watch list.</p>
    <h3>Total expired commodities: <%= number_with_delimiter(total_commodities_count, :delimeter => ',') %></h3>
  </div>
</div>

<table class="govuk-table">
  <thead class="govuk-table__head">
    <tr class="govuk-table__row">
      <th class="govuk-table__header">Commodity</th>
      <th class="govuk-table__header">Classification</th>
      <th class="govuk-table__header">End date</th>
      <th class="govuk-table__header">Action</th>
    </tr>
  </thead>
  <tbody class="govuk-table__body">
      <% @commodities.each do |commodity| %>
      <tr class="govuk-table__row">
        <td class="govuk-table__cell">
          <strong><%= commodity.try(:goods_nomenclature_item_id) %></strong>
        </td>
        <td class="govuk-table__cell">
          <%= commodity.try(:classification_description) %>
        </td>
        <td class="govuk-table__cell">
          <%= commodity.try(:validity_end_date).to_date.to_formatted_s(:long) %>
        </td>
        <td class="govuk-table__cell">
          <%= link_to('Review on tariff', commodity_path(commodity.try(:goods_nomenclature_item_id),
                      day: commodity.try(:validity_end_date).to_date.day,
                      month: commodity.try(:validity_end_date).to_date.month,
                      year: commodity.try(:validity_end_date).to_date.year),
                      target: '_blank')%></td>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= paginate commodities %>
