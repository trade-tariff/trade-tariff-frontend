<% myott_page_title 'Errors from commodity uploads', error: @alert %>

<% content_for :top_breadcrumbs do %>
  <%= generate_breadcrumbs(
      t('breadcrumb.myott.invalid'),
      [
        [t('breadcrumb.myott.watchlists'), myott_path],
        [t('breadcrumb.myott.mycommodities'), myott_mycommodities_path],
      ]
    )
  %>
<% end %>

<div class="govuk-body myott-mycommodities">
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      <h1 class="govuk-heading-xl">Errors from commodity uploads</h1>
      <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
          <p>On this page are errors from the spreadsheet you uploaded for your watch list.<br>These can include:</p>
          <ul class="govuk-list govuk-list--bullet">
            <li>The spreadsheet removing the first 0 in the codes for chapter 01 to 09</li>
            <li>Commodity codes not 10 digits long</li>
          </ul>
          <% if @targets.total_count.positive? %>
            <p>If you want to correct or remove these errors from your watch list, you should amend these errors in your own spreadsheet and upload it to replace all commodities.</p>
          <% end %>
          <h2 class="govuk-heading-m">Total input errors: <%= number_with_delimiter(@targets.total_count) %></h2>
        </div>
      </div>
      <% if @targets.total_count.positive? %>
        <div class="govuk-grid-row">
          <div class="govuk-grid-column-one-third">
            <%= link_to "Replace all commodities (upload)", new_myott_mycommodity_path, class: "govuk-button govuk-button--secondary" %>
          </div>
        </div>
        <table class="govuk-table">
          <thead class="govuk-table__head">
            <tr class="govuk-table__row">
              <th class="govuk-table__header">Invalid input</th>
            </tr>
          </thead>
          <tbody class="govuk-table__body">
            <% @targets.each do |target| %>
            <tr class="govuk-table__row">
              <td class="govuk-table__cell">
                <%= target.goods_nomenclature_item_id %>
              </td>
            </tr>
          <% end %>
          </tbody>
        </table>
        <%= paginate @targets %>
      <% end %>
    </div>
  </div>
</div>
