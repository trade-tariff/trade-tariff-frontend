// mark.js@8.11.1 downloaded from https://ga.jspm.io/npm:mark.js@8.11.1/dist/mark.js

var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var t={};(function(e,r){t=r()})(t,(function(){var t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var r=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(e,t,r){t&&defineProperties(e.prototype,t);r&&defineProperties(e,r);return e}}();var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var a=function(){function DOMIterator(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;classCallCheck(this||e,DOMIterator);(this||e).ctx=t;(this||e).iframes=r;(this||e).exclude=n;(this||e).iframesTimeout=a}r(DOMIterator,[{key:"getContexts",value:function getContexts(){var t=void 0,r=[];t="undefined"!==typeof(this||e).ctx&&(this||e).ctx?NodeList.prototype.isPrototypeOf((this||e).ctx)?Array.prototype.slice.call((this||e).ctx):Array.isArray((this||e).ctx)?(this||e).ctx:"string"===typeof(this||e).ctx?Array.prototype.slice.call(document.querySelectorAll((this||e).ctx)):[(this||e).ctx]:[];t.forEach((function(e){var t=r.filter((function(t){return t.contains(e)})).length>0;-1!==r.indexOf(e)||t||r.push(e)}));return r}},{key:"getIframeContents",value:function getIframeContents(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};var n=void 0;try{var a=e.contentWindow;n=a.document;if(!a||!n)throw new Error("iframe inaccessible")}catch(e){r()}n&&t(n)}},{key:"isIframeBlank",value:function isIframeBlank(e){var t="about:blank",r=e.getAttribute("src").trim(),n=e.contentWindow.location.href;return n===t&&r!==t&&r}},{key:"observeIframeLoad",value:function observeIframeLoad(t,r,n){var a=this||e;var i=false,o=null;var s=function listener(){if(!i){i=true;clearTimeout(o);try{if(!a.isIframeBlank(t)){t.removeEventListener("load",listener);a.getIframeContents(t,r,n)}}catch(e){n()}}};t.addEventListener("load",s);o=setTimeout(s,(this||e).iframesTimeout)}},{key:"onIframeReady",value:function onIframeReady(e,t,r){try{"complete"===e.contentWindow.document.readyState?this.isIframeBlank(e)?this.observeIframeLoad(e,t,r):this.getIframeContents(e,t,r):this.observeIframeLoad(e,t,r)}catch(e){r()}}},{key:"waitForIframes",value:function waitForIframes(t,r){var n=this||e;var a=0;this.forEachIframe(t,(function(){return true}),(function(e){a++;n.waitForIframes(e.querySelector("html"),(function(){--a||r()}))}),(function(e){e||r()}))}},{key:"forEachIframe",value:function forEachIframe(t,r,n){var a=this||e;var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};var o=t.querySelectorAll("iframe"),s=o.length,c=0;o=Array.prototype.slice.call(o);var u=function checkEnd(){--s<=0&&i(c)};s||u();o.forEach((function(e){DOMIterator.matches(e,a.exclude)?u():a.onIframeReady(e,(function(t){if(r(e)){c++;n(t)}u()}),u)}))}},{key:"createIterator",value:function createIterator(e,t,r){return document.createNodeIterator(e,t,r,false)}},{key:"createInstanceOnIframe",value:function createInstanceOnIframe(t){return new DOMIterator(t.querySelector("html"),(this||e).iframes)}},{key:"compareNodeIframe",value:function compareNodeIframe(e,t,r){var n=e.compareDocumentPosition(r),a=Node.DOCUMENT_POSITION_PRECEDING;if(n&a){if(null===t)return true;var i=t.compareDocumentPosition(r),o=Node.DOCUMENT_POSITION_FOLLOWING;if(i&o)return true}return false}},{key:"getIteratorNode",value:function getIteratorNode(e){var t=e.previousNode();var r=void 0;r=(null===t||e.nextNode())&&e.nextNode();return{prevNode:t,node:r}}},{key:"checkIframeFilter",value:function checkIframeFilter(e,t,r,n){var a=false,i=false;n.forEach((function(e,t){if(e.val===r){a=t;i=e.handled}}));if(this.compareNodeIframe(e,t,r)){false!==a||i?false===a||i||(n[a].handled=true):n.push({val:r,handled:true});return true}false===a&&n.push({val:r,handled:false});return false}},{key:"handleOpenIframes",value:function handleOpenIframes(t,r,n,a){var i=this||e;t.forEach((function(e){e.handled||i.getIframeContents(e.val,(function(e){i.createInstanceOnIframe(e).forEachNode(r,n,a)}))}))}},{key:"iterateThroughNodes",value:function iterateThroughNodes(t,r,n,a,i){var o=this||e;var s=this.createIterator(r,t,a);var c=[],u=[],l=void 0,h=void 0,f=function retrieveNodes(){var e=o.getIteratorNode(s);h=e.prevNode;l=e.node;return l};while(f()){(this||e).iframes&&this.forEachIframe(r,(function(e){return o.checkIframeFilter(l,h,e,c)}),(function(e){o.createInstanceOnIframe(e).forEachNode(t,(function(e){return u.push(e)}),a)}));u.push(l)}u.forEach((function(e){n(e)}));(this||e).iframes&&this.handleOpenIframes(c,t,n,a);i()}},{key:"forEachNode",value:function forEachNode(t,r,n){var a=this||e;var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};var o=this.getContexts();var s=o.length;s||i();o.forEach((function(e){var o=function ready(){a.iterateThroughNodes(t,e,r,n,(function(){--s<=0&&i()}))};a.iframes?a.waitForIframes(e,o):o()}))}}],[{key:"matches",value:function matches(e,t){var r="string"===typeof t?[t]:t,n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;if(n){var a=false;r.every((function(t){if(n.call(e,t)){a=true;return false}return true}));return a}return false}}]);return DOMIterator}();var i=function(){function Mark(t){classCallCheck(this||e,Mark);(this||e).ctx=t;(this||e).ie=false;var r=window.navigator.userAgent;(r.indexOf("MSIE")>-1||r.indexOf("Trident")>-1)&&((this||e).ie=true)}r(Mark,[{key:"log",value:function log(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"debug";var log=(this||e).opt.log;(this||e).opt.debug&&"object"===("undefined"===typeof log?"undefined":t(log))&&"function"===typeof log[n]&&log[n]("mark.js: "+r)}},{key:"escapeStr",value:function escapeStr(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function createRegExp(t){"disabled"!==(this||e).opt.wildcards&&(t=this.setupWildcardsRegExp(t));t=this.escapeStr(t);Object.keys((this||e).opt.synonyms).length&&(t=this.createSynonymsRegExp(t));((this||e).opt.ignoreJoiners||(this||e).opt.ignorePunctuation.length)&&(t=this.setupIgnoreJoinersRegExp(t));(this||e).opt.diacritics&&(t=this.createDiacriticsRegExp(t));t=this.createMergedBlanksRegExp(t);((this||e).opt.ignoreJoiners||(this||e).opt.ignorePunctuation.length)&&(t=this.createJoinersRegExp(t));"disabled"!==(this||e).opt.wildcards&&(t=this.createWildcardsRegExp(t));t=this.createAccuracyRegExp(t);return t}},{key:"createSynonymsRegExp",value:function createSynonymsRegExp(t){var r=(this||e).opt.synonyms,n=(this||e).opt.caseSensitive?"":"i",a=(this||e).opt.ignoreJoiners||(this||e).opt.ignorePunctuation.length?"\0":"";for(var i in r)if(r.hasOwnProperty(i)){var o=r[i],s="disabled"!==(this||e).opt.wildcards?this.setupWildcardsRegExp(i):this.escapeStr(i),c="disabled"!==(this||e).opt.wildcards?this.setupWildcardsRegExp(o):this.escapeStr(o);""!==s&&""!==c&&(t=t.replace(new RegExp("("+this.escapeStr(s)+"|"+this.escapeStr(c)+")","gm"+n),a+"("+this.processSynomyms(s)+"|"+this.processSynomyms(c)+")"+a))}return t}},{key:"processSynomyms",value:function processSynomyms(t){((this||e).opt.ignoreJoiners||(this||e).opt.ignorePunctuation.length)&&(t=this.setupIgnoreJoinersRegExp(t));return t}},{key:"setupWildcardsRegExp",value:function setupWildcardsRegExp(e){e=e.replace(/(?:\\)*\?/g,(function(e){return"\\"===e.charAt(0)?"?":""}));return e.replace(/(?:\\)*\*/g,(function(e){return"\\"===e.charAt(0)?"*":""}))}},{key:"createWildcardsRegExp",value:function createWildcardsRegExp(t){var r="withSpaces"===(this||e).opt.wildcards;return t.replace(/\u0001/g,r?"[\\S\\s]?":"\\S?").replace(/\u0002/g,r?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function setupIgnoreJoinersRegExp(e){return e.replace(/[^(|)\\]/g,(function(e,t,r){var n=r.charAt(t+1);return/[(|)\\]/.test(n)||""===n?e:e+"\0"}))}},{key:"createJoinersRegExp",value:function createJoinersRegExp(t){var r=[];var n=(this||e).opt.ignorePunctuation;Array.isArray(n)&&n.length&&r.push(this.escapeStr(n.join("")));(this||e).opt.ignoreJoiners&&r.push("\\u00ad\\u200b\\u200c\\u200d");return r.length?t.split(/\u0000+/).join("["+r.join("")+"]*"):t}},{key:"createDiacriticsRegExp",value:function createDiacriticsRegExp(t){var r=(this||e).opt.caseSensitive?"":"i",n=(this||e).opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"];var a=[];t.split("").forEach((function(e){n.every((function(n){if(-1!==n.indexOf(e)){if(a.indexOf(n)>-1)return false;t=t.replace(new RegExp("["+n+"]","gm"+r),"["+n+"]");a.push(n)}return true}))}));return t}},{key:"createMergedBlanksRegExp",value:function createMergedBlanksRegExp(e){return e.replace(/[\s]+/gim,"[\\s]+")}},{key:"createAccuracyRegExp",value:function createAccuracyRegExp(t){var r=this||e;var n="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿";var a=(this||e).opt.accuracy,i="string"===typeof a?a:a.value,o="string"===typeof a?[]:a.limiters,s="";o.forEach((function(e){s+="|"+r.escapeStr(e)}));switch(i){case"partially":default:return"()("+t+")";case"complementary":s="\\s"+(s||this.escapeStr(n));return"()([^"+s+"]*"+t+"[^"+s+"]*)";case"exactly":return"(^|\\s"+s+")("+t+")(?=$|\\s"+s+")"}}},{key:"getSeparatedKeywords",value:function getSeparatedKeywords(t){var r=this||e;var n=[];t.forEach((function(e){r.opt.separateWordSearch?e.split(" ").forEach((function(e){e.trim()&&-1===n.indexOf(e)&&n.push(e)})):e.trim()&&-1===n.indexOf(e)&&n.push(e)}));return{keywords:n.sort((function(e,t){return t.length-e.length})),length:n.length}}},{key:"isNumeric",value:function isNumeric(e){return Number(parseFloat(e))==e}},{key:"checkRanges",value:function checkRanges(t){var r=this||e;if(!Array.isArray(t)||"[object Object]"!==Object.prototype.toString.call(t[0])){this.log("markRanges() will only accept an array of objects");(this||e).opt.noMatch(t);return[]}var n=[];var a=0;t.sort((function(e,t){return e.start-t.start})).forEach((function(e){var t=r.callNoMatchOnInvalidRanges(e,a),i=t.start,o=t.end,s=t.valid;if(s){e.start=i;e.length=o-i;n.push(e);a=o}}));return n}},{key:"callNoMatchOnInvalidRanges",value:function callNoMatchOnInvalidRanges(t,r){var n=void 0,a=void 0,i=false;if(t&&"undefined"!==typeof t.start){n=parseInt(t.start,10);a=n+parseInt(t.length,10);if(this.isNumeric(t.start)&&this.isNumeric(t.length)&&a-r>0&&a-n>0)i=true;else{this.log("Ignoring invalid or overlapping range: "+JSON.stringify(t));(this||e).opt.noMatch(t)}}else{this.log("Ignoring invalid range: "+JSON.stringify(t));(this||e).opt.noMatch(t)}return{start:n,end:a,valid:i}}},{key:"checkWhitespaceRanges",value:function checkWhitespaceRanges(t,r,n){var a=void 0,i=true,o=n.length,s=r-o,c=parseInt(t.start,10)-s;c=c>o?o:c;a=c+parseInt(t.length,10);if(a>o){a=o;this.log("End range automatically set to the max value of "+o)}if(c<0||a-c<0||c>o||a>o){i=false;this.log("Invalid range: "+JSON.stringify(t));(this||e).opt.noMatch(t)}else if(""===n.substring(c,a).replace(/\s+/g,"")){i=false;this.log("Skipping whitespace only range: "+JSON.stringify(t));(this||e).opt.noMatch(t)}return{start:c,end:a,valid:i}}},{key:"getTextNodes",value:function getTextNodes(t){var r=this||e;var n="",a=[];(this||e).iterator.forEachNode(NodeFilter.SHOW_TEXT,(function(e){a.push({start:n.length,end:(n+=e.textContent).length,node:e})}),(function(e){return r.matchesExclude(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),(function(){t({value:n,nodes:a})}))}},{key:"matchesExclude",value:function matchesExclude(t){return a.matches(t,(this||e).opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function wrapRangeInTextNode(t,r,n){var a=(this||e).opt.element?(this||e).opt.element:"mark",i=t.splitText(r),o=i.splitText(n-r);var s=document.createElement(a);s.setAttribute("data-markjs","true");(this||e).opt.className&&s.setAttribute("class",(this||e).opt.className);s.textContent=i.textContent;i.parentNode.replaceChild(s,i);return o}},{key:"wrapRangeInMappedTextNode",value:function wrapRangeInMappedTextNode(t,r,n,a,i){var o=this||e;t.nodes.every((function(e,s){var c=t.nodes[s+1];if("undefined"===typeof c||c.start>r){if(!a(e.node))return false;var u=r-e.start,l=(n>e.end?e.end:n)-e.start,h=t.value.substr(0,e.start),f=t.value.substr(l+e.start);e.node=o.wrapRangeInTextNode(e.node,u,l);t.value=h+f;t.nodes.forEach((function(e,r){if(r>=s){t.nodes[r].start>0&&r!==s&&(t.nodes[r].start-=l);t.nodes[r].end-=l}}));n-=l;i(e.node.previousSibling,e.start);if(!(n>e.end))return false;r=e.end}return true}))}},{key:"wrapMatches",value:function wrapMatches(t,r,n,a,i){var o=this||e;var s=0===r?0:r+1;this.getTextNodes((function(e){e.nodes.forEach((function(e){e=e.node;var r=void 0;while(null!==(r=t.exec(e.textContent))&&""!==r[s])if(n(r[s],e)){var i=r.index;if(0!==s)for(var c=1;c<s;c++)i+=r[c].length;e=o.wrapRangeInTextNode(e,i,i+r[s].length);a(e.previousSibling);t.lastIndex=0}}));i()}))}},{key:"wrapMatchesAcrossElements",value:function wrapMatchesAcrossElements(t,r,n,a,i){var o=this||e;var s=0===r?0:r+1;this.getTextNodes((function(e){var r=void 0;while(null!==(r=t.exec(e.value))&&""!==r[s]){var c=r.index;if(0!==s)for(var u=1;u<s;u++)c+=r[u].length;var l=c+r[s].length;o.wrapRangeInMappedTextNode(e,c,l,(function(e){return n(r[s],e)}),(function(e,r){t.lastIndex=r;a(e)}))}i()}))}},{key:"wrapRangeFromIndex",value:function wrapRangeFromIndex(t,r,n,a){var i=this||e;this.getTextNodes((function(e){var o=e.value.length;t.forEach((function(t,a){var s=i.checkWhitespaceRanges(t,o,e.value),c=s.start,u=s.end,l=s.valid;l&&i.wrapRangeInMappedTextNode(e,c,u,(function(n){return r(n,t,e.value.substring(c,u),a)}),(function(e){n(e,t)}))}));a()}))}},{key:"unwrapMatches",value:function unwrapMatches(t){var r=t.parentNode;var n=document.createDocumentFragment();while(t.firstChild)n.appendChild(t.removeChild(t.firstChild));r.replaceChild(n,t);(this||e).ie?this.normalizeTextNode(r):r.normalize()}},{key:"normalizeTextNode",value:function normalizeTextNode(e){if(e){if(3===e.nodeType)while(e.nextSibling&&3===e.nextSibling.nodeType){e.nodeValue+=e.nextSibling.nodeValue;e.parentNode.removeChild(e.nextSibling)}else this.normalizeTextNode(e.firstChild);this.normalizeTextNode(e.nextSibling)}}},{key:"markRegExp",value:function markRegExp(t,r){var n=this||e;(this||e).opt=r;this.log('Searching with expression "'+t+'"');var a=0,i="wrapMatches";var o=function eachCb(e){a++;n.opt.each(e)};(this||e).opt.acrossElements&&(i="wrapMatchesAcrossElements");this[i](t,(this||e).opt.ignoreGroups,(function(e,t){return n.opt.filter(t,e,a)}),o,(function(){0===a&&n.opt.noMatch(t);n.opt.done(a)}))}},{key:"mark",value:function mark(t,r){var n=this||e;(this||e).opt=r;var a=0,i="wrapMatches";var o=this.getSeparatedKeywords("string"===typeof t?[t]:t),s=o.keywords,c=o.length,u=(this||e).opt.caseSensitive?"":"i",l=function handler(e){var t=new RegExp(n.createRegExp(e),"gm"+u),r=0;n.log('Searching with expression "'+t+'"');n[i](t,1,(function(t,i){return n.opt.filter(i,e,a,r)}),(function(e){r++;a++;n.opt.each(e)}),(function(){0===r&&n.opt.noMatch(e);s[c-1]===e?n.opt.done(a):handler(s[s.indexOf(e)+1])}))};(this||e).opt.acrossElements&&(i="wrapMatchesAcrossElements");0===c?(this||e).opt.done(a):l(s[0])}},{key:"markRanges",value:function markRanges(t,r){var n=this||e;(this||e).opt=r;var a=0,i=this.checkRanges(t);if(i&&i.length){this.log("Starting to mark with the following ranges: "+JSON.stringify(i));this.wrapRangeFromIndex(i,(function(e,t,r,a){return n.opt.filter(e,t,r,a)}),(function(e,t){a++;n.opt.each(e,t)}),(function(){n.opt.done(a)}))}else(this||e).opt.done(a)}},{key:"unmark",value:function unmark(t){var r=this||e;(this||e).opt=t;var n=(this||e).opt.element?(this||e).opt.element:"*";n+="[data-markjs]";(this||e).opt.className&&(n+="."+(this||e).opt.className);this.log('Removal selector "'+n+'"');(this||e).iterator.forEachNode(NodeFilter.SHOW_ELEMENT,(function(e){r.unwrapMatches(e)}),(function(e){var t=a.matches(e,n),i=r.matchesExclude(e);return!t||i?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),(this||e).opt.done)}},{key:"opt",set:function set$$1(t){(this||e)._opt=n({},{element:"",className:"",exclude:[],iframes:false,iframesTimeout:5e3,separateWordSearch:true,diacritics:true,synonyms:{},accuracy:"partially",acrossElements:false,caseSensitive:false,ignoreJoiners:false,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function each(){},noMatch:function noMatch(){},filter:function filter(){return true},done:function done(){},debug:false,log:window.console},t)},get:function get$$1(){return(this||e)._opt}},{key:"iterator",get:function get$$1(){return new a((this||e).ctx,(this||e).opt.iframes,(this||e).opt.exclude,(this||e).opt.iframesTimeout)}}]);return Mark}();function Mark(t){var r=this||e;var n=new i(t);(this||e).mark=function(e,t){n.mark(e,t);return r};(this||e).markRegExp=function(e,t){n.markRegExp(e,t);return r};(this||e).markRanges=function(e,t){n.markRanges(e,t);return r};(this||e).unmark=function(e){n.unmark(e);return r};return this||e}return Mark}));var r=t;export default r;

